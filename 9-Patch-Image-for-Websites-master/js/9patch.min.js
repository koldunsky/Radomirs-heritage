(function(){window.attachEvent?window.attachEvent("onload",m):window.addEventListener?window.addEventListener("load",m,!1):document.addEventListener("load",m,!1);function m(){for(var a=document.getElementsByTagName("div"),b=0;b<a.length;b++)q(a[b],"background-image").match(/\.9\.(png|gif)/i)&&new r(a[b])}function q(a,b){if(window.getComputedStyle){var c=window.getComputedStyle(a,"");return null==c?"":c.getPropertyValue(b)}return a.currentStyle?a.currentStyle[b]:""}
function r(a){this.c=a;this.f=new Image;this.f.src=q(this.c,"background-image").replace(/"/g,"").replace(/url\(|\)$/ig,"");this.g=q(this.c,"background-color");this.c.style.background="none";a=document.createElement("canvas").getContext("2d");a.drawImage(this.f,0,0);var b=a.getImageData(0,0,this.f.width,1).data,c=b.length-4,e=b[0]+","+b[1]+","+b[2]+","+b[3],c=b[c]+","+b[c+1]+","+b[c+2]+","+b[c+3];this.b=u(b,e,c);b=a.getImageData(0,0,1,this.f.height).data;this.a=u(b,e,c);var g=this;3==this.b.length&&
3==this.a.length&&"s"==this.b[0][0]&&"s"!=this.b[1][0]&&"s"==this.b[2][0]&&"s"==this.a[0][0]&&"s"!=this.a[1][0]&&"s"==this.a[2][0]?v(this):(x(this),this.c.onresize=function(){x(g)})}r.prototype.c=null;r.prototype.b=null;r.prototype.a=null;r.prototype.f=null;
function u(a,b,c){var e,g,l,f,d=[];l=a[4]+","+a[5]+","+a[6]+","+a[7];e=l==b?"s":l==c?"r":"d";g=1;for(var h=4,k=a.length-4;h<k;h+=4)l=a[h]+","+a[h+1]+","+a[h+2]+","+a[h+3],f=l==b?"s":l==c?"r":"d",e!=f&&(l=h/4-g,d.push([e,g,l]),e=f,g=h/4);d.push([e,g,h/4-g]);return d}
function x(a){var b,c,e,g;e=a.c.offsetWidth;g=a.c.offsetHeight;c=document.createElement("canvas");b=c.getContext("2d");c.width=e;c.height=g;for(var l,f=l=0,d=0,h=a.b.length;d<h;d++)"s"==a.b[d][0]?l+=a.b[d][2]:f++;l=(e-l)/f;for(var k=0,d=f=0,h=a.a.length;d<h;d++)"s"==a.a[d][0]?k+=a.a[d][2]:f++;g=(g-k)/f;d=0;for(f=a.a.length;d<f;d++){k=0;for(h=a.b.length;k<h;k++){var p,t;p="d"==a.b[k][0]?l:a.b[k][2];t="d"==a.a[d][0]?g:a.a[d][2];if("r"!=a.a[d][0])b.drawImage(a.f,a.b[k][1],a.a[d][1],a.b[k][2],a.a[d][2],
0,0,p,t);else{var n=document.createElement("canvas");n.width=a.b[k][2];n.height=a.a[d][2];n.getContext("2d").drawImage(a.f,a.b[k][1],a.a[d][1],a.b[k][2],a.a[d][2],0,0,a.b[k][2],a.a[d][2]);n=b.createPattern(n,"repeat");b.fillStyle=n;b.fillRect(0,0,p,t)}b.translate(p,0)}b.translate(-e,"s"==a.a[d][0]?a.a[d][2]:g)}var w=c.toDataURL("image/png");b=new Image;b.onload=function(){a.c.style.background=a.g+" url("+w+") no-repeat"};b.src=w}
function v(a){var b,c;c=document.createElement("canvas");b=c.getContext("2d");c.width=a.f.width-2;c.height=a.f.height-2;b.drawImage(a.f,-1,-1);var e=c.toDataURL("image/png");b=new Image;b.onload=function(){var b;a:{b=["MozBorderImage","WebkitBorderImage","OBorderImage","borderImage"];for(var c=document.documentElement,f=0;f<b.length;f++)if("string"==typeof c.style[b[f]]){b=b[f];break a}b=!1}c=a.a[0][2]+" "+a.b[2][2]+" "+a.a[2][2]+" "+a.b[0][2];a.c.style.borderWidth=a.a[0][2]+"px "+a.b[2][2]+"px "+
a.a[2][2]+"px "+a.b[0][2]+"px";a.c.style.borderStyle="solid";a.c.style.padding="0";a.c.style[b]="url("+e+") "+c+" "+("r"==a.b[1][1]?"repeat":"stretch")+" "+("r"==a.a[1][1]?"repeat":"stretch")};b.src=e}window.NinePatch=r;})();